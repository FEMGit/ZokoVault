<% additional_params ||= {} %>
<% separate_shared_card ||= false %>
<% skip_edit_share_class ||= false %>
<% title ||= 'Shared With' %>

<% if separate_shared_card.eql? false %>
  <section class="shared-with <% if !skip_edit_share_class %> edit-shared <% end %>">
    <h3 class="card-label shared-label">
      <svg class="icon" viewBox="0 0 20 20">
        <use xlink:href="#icon-Safe"></use>
      </svg> <%= title %>
    </h3>
    <label>Shared With</label><br>
    <div class="chosen-styled-select">
      <%= contact_select_with_create_new(f, shared_with_field_symbol, @contacts_shareable, additional_params) %>
    </div>
    <div id="email-preview-list" class="<%= shared_with_dropdown_id %>"></div>
  </section>
<% else %>
  <h3>Shared With</h3>

  <div class="card category-shared">
    <section class="shared-with category-shared">

      <label>Shared With</label>
      <div class="chosen-styled-select">
         <%= contact_select_with_create_new(f, shared_with_field_symbol, @contacts_shareable, additional_params) %>
      </div>
      <div id="email-preview-list"></div>
    </section>
  </div><br>
<% end %>

<%= render partial: 'layouts/shared_with_email_preview', locals: { shared_with_dropdown_id: shared_with_dropdown_id }  %>
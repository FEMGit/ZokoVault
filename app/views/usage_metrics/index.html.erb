<label>Number of Unique Users</label>
<p><%= @uniq_user_count %></p>

<label>Number of Unique Documents</label>
<p><%= @uniq_document_count %></p>

<h3>ZokuVault Users</h3>
<table id="user-statistics-table">
  <thead>
    <tr>
      <th>Last Name</th>
      <th>First Name</th>
      <th>Email</th>
      <th>User Type</th>
      <th>Invitations Worked</th>
      <th>Documents/User</th>
      <th>Shares/User</th>
      <th>Logins/Current Week</th>
      <th>Logins/Week AVG</th>
      <th>Session Length AVG</th>
      <th>Site Completed (%)</th>
      <th class="nosort">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% if @users && @users.empty? %>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
      <td style="display: none"></td>
    <% end %>
    <% @users && @users.each do |user| %>
      <tr>
        <td>
          <%= user.last_name %>
        </td>
        <td>
          <%= user.first_name %>
        </td>
        <td>
          <%= user.email %>
        </td>
        <td>
          User Type
        </td>
        <td>
          <%= user_invitations_count(user) %>
        </td>
        <td>
          <%= documents_per_user(user) %>
        </td>
        <td>
          <%= shares_per_user(user) %>
        </td>
        <td>
          <%= login_count_per_week(user) %>
        </td>
        <td>
          <%= login_count_per_week_avg(user) %>
        </td>
        <td>
          <%= session_length_avg(user) %>
        </td>
        <td style="max-width: 400px; overflow: hidden; text-overflow: ellipsis;">
          <%= site_completed(user) %>
        </td>
        <td>
          <%= link_to 'Details', statistic_details_path(user.id), class: "outline-button small-button" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<script>
  $(document).ready(function(){
    var userTableParams = {
        paging: false,
        searching: false,
        info: false,
        aaSorting: [[0, 'asc']],
        'aoColumnDefs': [{
          'bSortable': false,
          'aTargets': ['nosort']
        }]
      };
    $('#user-statistics-table').DataTable(tableParams);
  });
</script>

<div class="modal-header">
  <h2>Upload Important Documents</h2>
  
  <p>Let's learn how to upload a document. Do you have any documents in digital format that are ready to be uploaded? Examples include:</p>
  <ul>
    <li>Your Will</li>
    <li>Insurance Policies</li>
    <li>Financial Documents</li>
    <li>Identification</li>
  </ul>
</div>

<div class="modal-content" style='overflow-x: hidden;'>
  <%= hidden_field_tag :url %>
  
  <h3 <% if @documents.blank? %> style="display: none;" <% end %> id='important-documents-table-title'>Your Documents</h3>
  <table id="important-documents-table" <% if @documents.blank? %> style="display: none;" <% end %>>
    <thead>
      <tr>
        <th>Name</th>
        <th>Modified</th>
        <th>Tags</th>
        <th class="fixed-cell-small">Shared With</th>
        <th class="fixed-cell-small">Notes</th>
      </tr>
    </thead>
    <tbody>
      <% @documents.each do |document| %>
        <tr>
          <td>
            <%= render :partial => "layouts/document_links", :locals => {:document => document } %>
          </td>
          <td>
            <%= date_format(document.updated_at) %>
          </td>
          <td>
            <%= render :partial => "layouts/document_tags", :locals => {:document => document} %>
          </td>
          <td>
            <%= render :partial => "layouts/share_with_contacts", :locals => {:shares => document_shares(document)} %>
          </td>
          <td>
            <%= render :partial => "layouts/document_notes", :locals => {:notes => document.description } %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  
  <div class="flash-success-static flash important-doc static small" style="display: none;">You added a document! Upload another Document, or click Next.</div>
  
  <%= link_to 'Upload a Document', new_document_path, class: 'button primary-button medium-button inline-block' %>
</div>

<script>
  $(document).ready(function(){
      $('#important-documents-table').DataTable( {
        paging: false,
        searching: false,
        info: false,
        aaSorting: [[0, 'asc']]
    });
    
    if ($('.flash-success.flash').text() === 'Document was successfully created.') {
      $('.flash.important-doc').show()
    }
  });
</script>


<%= render :partial => "layouts/bread_crumbs" %>

<%= link_to @shared_user.nil? ? edit_investment_url(@financial_investment.id) : "", class: "edit-link" do%>
  <span class="circle-button">
    <svg class="icon circle-icon">
      <use xlink:href="#icon-pencil-1"></use>
    </svg>
  </span>Edit
<% end %>
<h1><%= @financial_investment.name %></h1>

<div class="card cg-3">

  <h3 class="card-label"><%= @financial_investment.investment_type %></h3>
  <% if !financial_investment_present?(@financial_investment) %>
    <label>There is no information about Investment or Debt</label>
  <% end %>
  
  <% if @financial_investment.owner %>
    <label>Owner</label>
    <p>
      <%= @financial_investment.owner.name %><br>
      <%= mail_to @financial_investment.owner.emailaddress, @financial_investment.owner.emailaddress %><br>
      <%= @financial_investment.owner.phone %>
    </p>
  <% end %>

  <% if @financial_investment.value.present? %>
    <label>Value</label>
    <p>
      <%= render partial: "financial_information/value_show", locals: { value: @financial_investment.value, type: @financial_investment.investment_type } %>
    </p>
  <% end %>

  <% if @financial_investment.web_address.present? %>
    <label>Web Address</label>
    <p><%= link_to @financial_investment.web_address, @financial_investment.web_address %></p>
  <% end %>
  
  <% if @financial_investment.phone_number.present? %>
    <label>Phone Number</label>
    <p><%= @financial_investment.phone_number %></p>
  <% end %>

  <% if show_financial_property_address?(@financial_investment) %>
    <label>Address</label>
    <p>
      <%= @financial_investment.address %><br>
      <%= @financial_investment.city %>,
      <%= @financial_investment.state %>
      <%= @financial_investment.zip %>
    </p>
  <% end %>

  <% if @financial_investment.primary_contact.present? %>
    <label>Primary Contact</label>
    <p>
      <%= @financial_investment.primary_contact.name %><br>
      <%= mail_to @financial_investment.primary_contact.emailaddress, @financial_investment.primary_contact.emailaddress %><br>
      <%= @financial_investment.primary_contact.phone %>
    </p>
  <% end %>
  
  <% if @financial_investment.notes.present? %>
    <label class="title">Notes</label>
    <p><%= @financial_investment.notes %></p>
  <% end %>
  
  <span class="clear"></span>
  
  <% if @financial_investment.share_with_contacts.present? %>
    <section class="shared-with">
      <h3 class="card-label shared-label">
        <svg class="icon" viewBox="0 0 20 20">
          <use xlink:href="#icon-Safe"></use>
        </svg>
        Shared With
      </h3>

      <label>Shared With</label><br>
      <% @financial_investment.share_with_contacts && @financial_investment.share_with_contacts.each do |contact| %>
        <%= render partial: "layouts/avatar_circle", locals: { :contact => contact } %>
      <% end %>
    </section>
  <% end %>
</div>

<div>
  <%= link_to new_documents_path(:shared_user_id => @shared_user.present? ? @shared_user.id : "", :category => @category, :group => @group, :financial_information_id => @investment_provider.id), class: "add-link fr" do %>
    <span class="circle-button">
      <svg class="icon circle-icon">
        <use xlink:href="#icon-plus-1"></use>
      </svg>
    </span>Add Document
  <% end %>
  <h3 class="mt-20">Investment or Debt Documents</h3>
</div>

<%= render :partial => "layouts/standard_document_table", :locals => {:documents => @documents} %>